(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-27536e14"],{"7c1d":function(t,e,a){},"7dfd":function(t,e,a){"use strict";a.r(e),a.d(e,"mobile",function(){return s}),a.d(e,"email",function(){return o}),a.d(e,"password",function(){return r}),a.d(e,"integer",function(){return n}),a.d(e,"Integer",function(){return i}),a.d(e,"money",function(){return l}),a.d(e,"TINumber",function(){return c}),a.d(e,"IDCard",function(){return u}),a.d(e,"userName",function(){return d}),a.d(e,"URL",function(){return m}),a.d(e,"TEL",function(){return p}),a.d(e,"licenseNum",function(){return g});const s=/^0?(13[0-9]|14[0-9]|15[0-9]|16[0-9]|17[0-9]|18[0-9]|19[0-9])[0-9]{8}$/,o=/^\w+([-+.]\w+)*@\w+([-.]\w+)*\.\w+([-.]\w+)*$/,r=/^[@A-Za-z0-9!#$%^&*.~,]{6,20}$/,n=/^[1-9]\d*$/,i=/^[0-9]\d*$/,l=/(^[1-9]([0-9]+)?(\.[0-9]{1,2})?$)|(^(0){1}$)|(^[0-9]\.[0-9]([0-9])?$)/,c=/^((\d{6}[0-9A-Z]{9})|([0-9A-Za-z]{2}\d{6}[0-9A-Za-z]{10,12}))$/,u=/(^\d{15}$)|(^\d{18}$)|(^\d{17}(\d|X|x)$)/,d=/[A-Za-z0-9_\-\u4e00-\u9fa5]$/,m=/^(https?|ftp):\/\/([a-zA-Z0-9.-]+(:[a-zA-Z0-9.&%$-]+)*@)*((25[0-5]|2[0-4][0-9]|1[0-9]{2}|[1-9][0-9]?)(\.(25[0-5]|2[0-4][0-9]|1[0-9]{2}|[1-9]?[0-9])){3}|([a-zA-Z0-9-]+\.)*[a-zA-Z0-9-]+\.(com|edu|gov|int|mil|net|org|biz|arpa|info|name|pro|aero|coop|museum|[a-zA-Z]{2}))(:[0-9]+)*(\/($|[a-zA-Z0-9.,?'\\+&%$#=~_-]+))*$/,p=/0\d{2,3}-\d{7,8}/,g=/(^(?:(?![IOZSV])[\dA-Z]){2}\d{6}(?:(?![IOZSV])[\dA-Z]){10}$)|(^\d{15}$)/},c222:function(t,e,a){"use strict";a.r(e);var s=a("8194"),o=a("7dfd"),r=a("a63b"),n=a("658f"),n={name:"Distribution",components:{vueQr:a.n(n).a},data(){return{status:0,applyForm:{},rules:{name:[{required:!0,message:"请输入真实姓名"}],idNumber:[{required:!0,message:"请输入身份证号"},{pattern:o.IDCard,message:"请输入正确的身份证号"}],settlementBankBranchName:[{required:!0,message:"请输入银行开户行",trigger:"blur"}],settlementBankAccountName:[{required:!0,message:"请输入银行开户名",trigger:"blur"}],settlementBankAccountNum:[{required:!0,message:"银行账号不正确",trigger:"blur"},{validator:(t,e,a)=>Object(r.a)(e),message:"银行账号不正确"}]},tabName:"goodsChecked",result:{},applyLoading:!1,goodsLoading:!1,withdrawApplyModal:!1,withdrawPrice:0,goodsData:{},logData:{},goodsColumns:[{title:"商品名称",slot:"name",width:400},{title:"商品价格",slot:"price"},{title:"佣金",slot:"commission"},{title:"操作",slot:"action",minWidth:120}],logColumns:[{title:"编号",slot:"sn"},{title:"申请时间",slot:"time"},{title:"提现金额",slot:"price"},{title:"提现状态",slot:"status"}],params:{pageNumber:1,pageSize:20,checked:!0},orderParams:{pageNumber:1,pageSize:20},logParams:{pageNumber:1,pageSize:20,sort:"createTime",order:"desc"},qrcode:"",qrcodeShow:!1,base64Img:"",goodsNameCurr:""}},mounted(){this.distribution()},methods:{apply(){this.$refs.form.validate(t=>{t&&(this.applyLoading=!0,Object(s.h)(this.form).then(t=>{this.applyLoading=!1,t.success&&(this.$Message.success("申请已提交，请等待管理员审核"),this.status=1)}))})},withdraw(){Object(s.t)({price:this.withdrawPrice}).then(t=>{this.withdrawApplyModal=!1,this.price=0,t.success?(this.$Message.success("申请已提交，请等待审核"),this.distribution(),this.getLog()):this.$Message.error(t.message)})},qrcodeData(t){this.base64Img=t},downloadQrcode(){let t=document.createElement("a"),e=new MouseEvent("click");t.download=this.goodsNameCurr||"photo",t.href=this.base64Img,t.dispatchEvent(e)},tabPaneChange(t){"goodsChecked"===t?(this.params.checked=!0,this.params.pageNUmber=1,this.getGoodsData()):"goodsUncheck"===t?(this.params.checked=!1,this.getGoodsData()):"log"===t&&(this.logParams.pageNumber=1,this.getLog())},changePage(t){this.params.pageNumber=t,this.getGoodsData()},changePageLog(t){this.logParams.pageNumber=t,this.getLog()},selectGoods(t,e){t={distributionGoodsId:t,checked:e};Object(s.P)(t).then(t=>{t.success&&(this.$Message.success("操作成功！"),this.getGoodsData())})},fenxiao(t){this.qrcode=`${location.origin}/goodsDetail?skuId=${t.skuId}&goodsId=${t.goodsId}&distributionId=`+this.result.id,this.goodsNameCurr=t.goodsName,this.qrcodeShow=!0},getGoodsData(){Object(s.z)(this.params).then(t=>{t.success&&(this.goodsData=t.result)})},getLog(){Object(s.u)(this.logParams).then(t=>{t.success&&(this.logData=t.result)})},distribution(){Object(s.v)().then(t=>{var e;t.result?(this.result=t.result,"PASS"===(e=t.result.distributionStatus)?(this.status=2,this.getGoodsData()):this.status="RETREAT"===e||"REFUSE"===e?0:1):t.data.success||22e3!==t.data.code?this.status=0:this.status=3})}}},a=(a("c7af"),a("2877")),a=Object(a.a)(n,function(){var a=this,t=a.$createElement,s=a._self._c||t;return s("div",{staticClass:"wrapper"},[s("card",{attrs:{_Title:"我的分销"}}),0===a.status?s("div",[s("Alert",{attrs:{type:"warning"}},[a._v("分销商申请")]),s("Form",{ref:"form",attrs:{model:a.applyForm,rules:a.rules}},[s("FormItem",{attrs:{label:"姓名",prop:"name"}},[s("Input",{model:{value:a.applyForm.name,callback:function(t){a.$set(a.applyForm,"name",t)},expression:"applyForm.name"}})],1),s("FormItem",{attrs:{label:"身份证号",prop:"idNumber"}},[s("Input",{model:{value:a.applyForm.idNumber,callback:function(t){a.$set(a.applyForm,"idNumber",t)},expression:"applyForm.idNumber"}})],1),s("FormItem",{attrs:{label:"银行开户行",prop:"settlementBankBranchName"}},[s("Input",{model:{value:a.applyForm.settlementBankBranchName,callback:function(t){a.$set(a.applyForm,"settlementBankBranchName",t)},expression:"applyForm.settlementBankBranchName"}})],1),s("FormItem",{attrs:{label:"银行开户名",prop:"settlementBankAccountName"}},[s("Input",{model:{value:a.applyForm.settlementBankAccountName,callback:function(t){a.$set(a.applyForm,"settlementBankAccountName",t)},expression:"applyForm.settlementBankAccountName"}})],1),s("FormItem",{attrs:{label:"银行账号",prop:"settlementBankAccountNum"}},[s("Input",{model:{value:a.applyForm.settlementBankAccountNum,callback:function(t){a.$set(a.applyForm,"settlementBankAccountNum",t)},expression:"applyForm.settlementBankAccountNum"}})],1),s("FormItem",[s("Button",{attrs:{type:"primary",loading:a.applyLoading},on:{click:a.apply}},[a._v("提交申请")])],1)],1)],1):a._e(),1===a.status?s("div",[s("Alert",{attrs:{type:"success"}},[a._v(" 您提交的信息正在审核 "),s("template",{slot:"desc"},[a._v("提交认证申请后，工作人员将在三个工作日进行核对完成审核")])],2)],1):a._e(),2===a.status?s("div",[a._m(0),s("div",{staticClass:"box"},[s("div",{staticClass:"mb_20 account-price"},[s("span",{staticClass:"subTips"},[a._v("可提现金额：")]),s("span",{staticClass:"fontsize_48 global_color"},[a._v("￥"+a._s(a._f("unitPrice")(a.result.canRebate)))]),s("span",{staticClass:"subTips"},[a._v("冻结金额：")]),s("span",{},[a._v("￥"+a._s(a._f("unitPrice")(a.result.commissionFrozen)))]),s("span",{staticClass:"subTips"},[a._v("返利总金额：")]),s("span",{},[a._v("￥"+a._s(a._f("unitPrice")(a.result.rebateTotal)))]),s("Button",{staticClass:"ml_20",attrs:{type:"primary",size:"small"},on:{click:function(t){a.withdrawApplyModal=!0}}},[a._v("申请提现")])],1)]),s("Tabs",{attrs:{value:a.tabName},on:{"on-click":a.tabPaneChange}},[s("TabPane",{attrs:{label:"已选商品",name:"goodsChecked"}},[s("Table",{attrs:{stripe:"",columns:a.goodsColumns,data:a.goodsData.records},scopedSlots:a._u([{key:"name",fn:function(t){var e=t.row;return[s("div",{staticClass:"goods-msg",on:{click:function(t){return a.linkTo("/goodsDetail?skuId="+e.skuId+"&goodsId="+e.goodsId)}}},[s("img",{staticStyle:{"vertical-align":"top"},attrs:{src:e.thumbnail,width:"60",height:"60",alt:""}}),a._v("  "+a._s(e.goodsName)+" ")])]}},{key:"price",fn:function(t){t=t.row;return[s("span",[a._v(" ￥"+a._s(a._f("unitPrice")(t.price)))])]}},{key:"commission",fn:function(t){t=t.row;return[s("span",[a._v(" ￥"+a._s(a._f("unitPrice")(t.commission)))])]}},{key:"action",fn:function(t){var e=t.row;return[s("Button",{staticStyle:{"margin-right":"5px"},attrs:{type:"success",size:"small"},on:{click:function(t){return a.fenxiao(e)}}},[a._v("分销商品")]),s("Button",{attrs:{type:"error",size:"small"},on:{click:function(t){return a.selectGoods(e.id,!1)}}},[a._v("取消选择")])]}}],null,!1,1142277250)}),s("div",{staticClass:"page-size"},[s("Page",{attrs:{current:a.params.pageNumber,total:a.goodsData.total,"page-size":a.params.pageSize,size:"small","show-total":"","show-elevator":""},on:{"on-change":a.changePage}})],1)],1),s("TabPane",{attrs:{label:"未选商品",name:"goodsUncheck"}},[s("Table",{attrs:{stripe:"",columns:a.goodsColumns,data:a.goodsData.records},scopedSlots:a._u([{key:"name",fn:function(t){var e=t.row;return[s("div",{staticClass:"goods-msg",on:{click:function(t){return a.linkTo("/goodsDetail?skuId="+e.skuId+"&goodsId="+e.goodsId)}}},[s("img",{staticStyle:{"vertical-align":"top"},attrs:{src:e.thumbnail,width:"60",height:"60",alt:""}}),a._v("  "+a._s(e.goodsName)+" ")])]}},{key:"price",fn:function(t){t=t.row;return[s("span",[a._v(" ￥"+a._s(a._f("unitPrice")(t.price)))])]}},{key:"commission",fn:function(t){t=t.row;return[s("span",[a._v(" ￥"+a._s(a._f("unitPrice")(t.commission)))])]}},{key:"action",fn:function(t){var e=t.row;return[s("Button",{staticStyle:{"margin-right":"5px"},attrs:{type:"primary",size:"small"},on:{click:function(t){return a.selectGoods(e.id,!0)}}},[a._v("选择商品")])]}}],null,!1,724206304)}),s("div",{staticClass:"page-size"},[s("Page",{attrs:{current:a.params.pageNumber,total:a.goodsData.total,"page-size":a.params.pageSize,size:"small","show-total":"","show-elevator":""},on:{"on-change":a.changePage}})],1)],1),s("TabPane",{attrs:{label:"提现记录",name:"log"}},[s("Table",{attrs:{stripe:"",columns:a.logColumns,data:a.logData.records},scopedSlots:a._u([{key:"sn",fn:function(t){t=t.row;return[s("span",[a._v(a._s(t.sn))])]}},{key:"time",fn:function(t){t=t.row;return[s("span",[a._v(a._s(t.createTime))])]}},{key:"price",fn:function(t){t=t.row;return["VIA_AUDITING"==t.distributionCashStatus?s("span",{staticStyle:{color:"green"}},[a._v(" +￥"+a._s(a._f("unitPrice")(t.price)))]):s("span",{staticStyle:{color:"red"}},[a._v(" -￥"+a._s(a._f("unitPrice")(t.price)))])]}},{key:"status",fn:function(t){t=t.row;return[s("span",[a._v(" "+a._s("APPLY"==t.distributionCashStatus?"待处理":"VIA_AUDITING"==t.distributionCashStatus?"通过":"拒绝"))])]}}],null,!1,124371129)}),s("div",{staticClass:"page-size"},[s("Page",{attrs:{current:a.logParams.pageNumber,total:a.logData.total,"page-size":a.logParams.pageSize,size:"small","show-total":"","show-elevator":""},on:{"on-change":a.changePageLog}})],1)],1)],1)],1):a._e(),3===a.status?s("div",[s("Alert",{attrs:{type:"error"}},[a._v(" 分销功能暂未开启 "),s("template",{slot:"desc"},[a._v("提交认证申请后，工作人员将在三个工作日进行核对完成审核")])],2)],1):a._e(),s("Modal",{attrs:{width:"530"},model:{value:a.withdrawApplyModal,callback:function(t){a.withdrawApplyModal=t},expression:"withdrawApplyModal"}},[s("p",{attrs:{slot:"header"},slot:"header"},[s("Icon",{attrs:{type:"edit"}}),s("span",[a._v("提现金额")])],1),s("div",[s("Input",{attrs:{size:"large",number:"",maxlength:"9"},model:{value:a.withdrawPrice,callback:function(t){a.withdrawPrice=t},expression:"withdrawPrice"}},[s("span",{attrs:{slot:"append"},slot:"append"},[a._v("元")])])],1),s("div",{staticStyle:{"text-align":"center"},attrs:{slot:"footer"},slot:"footer"},[s("Button",{attrs:{type:"primary",size:"large"},on:{click:a.withdraw}},[a._v("提现")])],1)]),s("Modal",{attrs:{title:"分销商品",width:"800"},model:{value:a.qrcodeShow,callback:function(t){a.qrcodeShow=t},expression:"qrcodeShow"}},[s("Alert",{attrs:{type:"warning"}},[a._v(" 下载二维码或者复制链接分享商品 ")]),s("div",{staticStyle:{width:"200px",height:"200px",border:"1px solid #eee"}},[s("vue-qr",{attrs:{text:a.qrcode,callback:a.qrcodeData,margin:0,colorDark:"#000",colorLight:"#fff",size:200}}),s("Button",{staticClass:"download-btn",attrs:{type:"success"},on:{click:a.downloadQrcode}},[a._v("下载二维码")])],1),s("div",{staticClass:"mt_10"},[a._v(" 商品链接："),s("Input",{staticStyle:{width:"400px"},model:{value:a.qrcode,callback:function(t){a.qrcode=t},expression:"qrcode"}})],1)],1)],1)},[function(){var t=this,e=t.$createElement,e=t._self._c||e;return e("div",{staticClass:"tips"},[e("p",[t._v("分销下线付款之后会生成分销订单。")]),e("p",[t._v(" 冻结金额：用户提现金额即为冻结金额，审核通过后扣除冻结金额，审核拒绝之后冻结金额返回可提现金额。 ")]),e("p",[t._v("可提现金额：分销订单佣金T+1解冻后可变为可提现金额。")])])}],!1,null,"78fc1fae",null);e.default=a.exports},c7af:function(t,e,a){"use strict";a("7c1d")}}]);