(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-444c6b56"],{"81fe":function(t,e,s){"use strict";s("fa1c")},"84a9":function(t,e,s){"use strict";s.d(e,"b",function(){return a}),s.d(e,"c",function(){return r}),s.d(e,"e",function(){return i}),s.d(e,"g",function(){return n}),s.d(e,"f",function(){return c}),s.d(e,"a",function(){return l}),s.d(e,"d",function(){return d}),s.d(e,"h",function(){return u});var o=s("ff66");function a(t){return Object(o.d)({url:"/buyer/store/store/apply/first",needToken:!0,method:o.a.PUT,params:t})}function r(t){return Object(o.d)({url:"/buyer/store/store/apply/second",needToken:!0,method:o.a.PUT,params:t})}function i(t){return Object(o.d)({url:"/buyer/store/store/apply/third",needToken:!0,method:o.a.PUT,params:t})}function n(t){return Object(o.d)({url:"/buyer/store/store/get/detail/"+t,needToken:!0,method:o.a.GET})}function c(t){return Object(o.d)({url:"/buyer/store/store/label/get/"+t,needToken:!0,method:o.a.GET})}function l(){return Object(o.d)({url:"/buyer/other/article/type/STORE_REGISTER",needToken:!0,method:o.a.GET})}function d(){return Object(o.d)({url:"/buyer/store/store/apply",needToken:!0,method:o.a.GET})}function u(t,e){return Object(o.d)({url:"/buyer/store/address/page/"+t,method:o.a.GET,params:e})}},"9f83":function(t,e,s){"use strict";s.r(e);var o=s("2934"),a=s("e487"),r=s("84a9"),i=s("8194"),n=s("c40e"),c=s("c106"),l=s("4540"),d=s("73ae"),u=s("365c");s("f74c");c={name:"Merchant",components:{Search:c.a,ModelForm:l.a,HoverSearch:d.a},data(){return{modelForm:{list:[]},topAdvert:{},showNav:!1,topSearchShow:!1,carouselLarge:!1,carouselOpacity:!1,enablePageData:!1,basePageData:!1,storeMsg:{},cateList:[],goodsList:[],total:0,IMLink:"",params:{pageNumber:1,pageSize:20,keyword:"",storeId:this.$route.query.id,storeCatId:""},cateName:"店铺推荐",storeCollected:!1}},created(){this.getStoreMsg()},methods:{getIndexData(){Object(u.a)({clientType:"PC",num:this.$route.query.id,pageType:"STORE"}).then(t=>{if(t.success){var e=JSON.parse(t.result.pageData);for(let t=0;t<e.list.length;t++){var s=e.list[t].type;"carousel2"===s?this.carouselLarge=!0:"carousel1"===s&&(this.carouselLarge=!0,this.carouselOpacity=!0)}this.modelForm=e,a.a.setItem("navList",e.list[1]),this.showNav=!0,this.topAdvert=e.list[0]}})},async IMService(){var t=a.a.getItem("accessToken");await this.getIMDetailMethods(),t?window.open(this.IMLink+"?token="+t+"&id="+this.storeMsg.storeId):this.$Message.error("请登录后再联系客服")},async getIMDetailMethods(){var t=await Object(o.e)();t.success&&(this.IMLink=t.result)},getStoreMsg(){Object(r.g)(this.$route.query.id).then(t=>{if(t.success){this.storeMsg=t.result,this.storeMsg.pageShow&&"1"===this.storeMsg.pageShow?this.getIndexData():this.getGoodsList();let e=this;window.onscroll=function(){var t=document.documentElement.scrollTop||document.body.scrollTop;e.topSearchShow=300<t}}})},getCateList(){Object(r.f)(this.$route.query.id).then(t=>{t.success&&(this.cateList=t.result)})},getGoodsList(){Object(n.c)(this.params).then(t=>{t.success&&(this.goodsList=t.result.content,this.total=t.result.totalElements)}).catch(()=>{})},goGoodsDetail(t,e){t=this.$router.resolve({path:"/goodsDetail",query:{skuId:t,goodsId:e}});window.open(t.href,"_blank")},search(t){this.params.keyword=t,this.getGoodsList()},searchByCate(t){this.params.storeCatId=t.id,this.cateName=t.labelName,this.getGoodsList()},changePageNum(t){this.params.pageNumber=t,this.getGoodsList()},changePageSize(t){this.params.pageNumber=1,this.params.pageSize=t,this.getGoodsList()},async collect(){this.storeCollected?(await Object(i.k)("STORE",this.storeMsg.storeId)).success&&(this.$Message.success("已取消收藏"),this.storeCollected=!1):200===(await Object(i.o)("STORE",this.storeMsg.storeId)).code&&(this.storeCollected=!0,this.$Message.success("收藏店铺成功,可以前往个人中心我的收藏查看"))}}},s("81fe"),l=s("2877"),d=Object(l.a)(c,function(){var s=this,t=s.$createElement,o=s._self._c||t;return o("div",{staticClass:"merchant"},[o("BaseHeader",{attrs:{isMerchant:!0}}),o("div",{staticClass:"shop-logo"},[o("div",[o("p",[s._v(s._s(s.storeMsg.storeName||"xx店铺"))]),o("p",{staticClass:"ellipsis",attrs:{alt:s.storeMsg.storeDesc},domProps:{innerHTML:s._s(s.storeMsg.storeDesc)}})]),o("div",[o("span",{staticClass:"hover-pointer",on:{click:s.collect}},[o("Icon",{attrs:{type:"ios-heart",color:s.storeCollected?"#ed3f14":"#fff"}}),s._v(s._s(s.storeCollected?"已收藏店铺":"收藏店铺")+" ")],1),o("span",{staticClass:"hover-pointer ml_10",staticStyle:{width:"80px"},on:{click:function(t){return s.IMService()}}},[o("Icon",{attrs:{custom:"icomoon icon-customer-service"}}),s._v("联系客服 ")],1)])]),o("div",{staticClass:"store-category"},[o("ul",{staticClass:"cate-list"},[o("li",{staticClass:"cate-item",on:{click:function(t){return s.searchByCate({id:"",labelName:"店铺推荐"})}}},[s._v(" 首页 ")]),s._l(s.cateList,function(e,t){return o("li",{key:t,staticClass:"cate-item"},[e.children.length?o("Dropdown",[o("div",{on:{click:function(t){return t.target!==t.currentTarget?null:s.searchByCate(e)}}},[s._v(" "+s._s(e.labelName)+" "),o("Icon",{attrs:{type:"ios-arrow-down"}})],1),o("DropdownMenu",{attrs:{slot:"list"},slot:"list"},s._l(e.children,function(e){return o("DropdownItem",{key:e.id,attrs:{name:e.id},nativeOn:{click:function(t){return s.searchByCate(e)}}},[s._v(s._s(e.labelName)+" ")])}),1)],1):o("span",{on:{click:function(t){return t.target!==t.currentTarget?null:s.searchByCate(e)}}},[s._v(s._s(e.labelName))])],1)})],2)]),s.storeMsg.pageShow&&"1"===s.storeMsg.pageShow?o("div",[o("model-form",{ref:"modelForm",attrs:{data:s.modelForm}})],1):o("div",[o("div",{staticClass:"promotion-decorate"},[s._v(s._s(s.cateName))]),o("div",{staticClass:"goods-list"},[0===s.goodsList.length?o("empty"):s._l(s.goodsList,function(e,t){return o("div",{key:t,staticClass:"goods-show-info",on:{click:function(t){return s.goGoodsDetail(e.content.id,e.content.goodsId)}}},[o("div",{staticClass:"goods-show-img"},[o("img",{attrs:{width:"220",height:"220",src:e.content.thumbnail}})]),o("div",{staticClass:"goods-show-price"},[o("span",[o("span",{staticClass:"seckill-price text-danger"},[s._v(s._s(s._f("unitPrice")(e.content.price,"￥")))]),o("span",{staticClass:"right-price"},[s._v("+"+s._s(s._f("unitPrice")(+e.content.price,"$")))]),o("TokenIcon",{staticStyle:{"margin-top":"-2px"}})],1)]),o("div",{staticClass:"goods-show-detail"},[o("span",[s._v(s._s(e.content.goodsName))])]),o("div",{staticClass:"goods-show-num"},[s._v(" 已有"),o("span",[s._v(s._s(e.content.commentNum||0))]),s._v("人评价 ")])])})],2),o("div",{staticClass:"goods-page"},[o("Page",{attrs:{"show-sizer":"",total:s.total,"page-size":s.params.pageSize},on:{"on-change":s.changePageNum,"on-page-size-change":s.changePageSize}})],1)]),o("BaseFooter")],1)},[],!1,null,"691615fe",null);e.default=d.exports},fa1c:function(t,e,s){}}]);